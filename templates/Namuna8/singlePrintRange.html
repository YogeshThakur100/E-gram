<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <title>नमूना ८</title>
    <style>
        @media print {
          @page {
            size: A4 landscape;
          }
          #toolbar {
            display: none !important;
        }
        }
    </style>
</head>
<div id="toolbar" style="display: flex; align-items: center; justify-content: space-between; padding: 6px 12px; background: #f8f8f8; border-bottom: 1px solid #ccc;">
    <!-- Left: Icon Buttons & Navigation -->
    <div style="display: flex; align-items: center; gap: 6px;">
        <button title="First Page" style="background: none; border: none; font-size: 16px; cursor: pointer;">⏮️</button>
        <button title="Previous Page" style="background: none; border: none; font-size: 16px; cursor: pointer;">◀️</button>
        <input type="text" value="1" id="pageInput" style="width: 32px; text-align: center; font-size: 14px; border: 1px solid #ccc; border-radius: 2px; margin: 0 2px;" />
        <span style="font-size: 14px; color: #888;"></span>
        <button title="Next Page" style="background: none; border: none; font-size: 16px; cursor: pointer;">▶️</button>
        <button title="Last Page" style="background: none; border: none; font-size: 16px; cursor: pointer;">⏭️</button>
        <button title="Zoom Out" onclick="zoomOut()" style="background: none; border: none; font-size: 18px; cursor: pointer;">➖</button>
        <span id="zoomPercent" style="min-width: 40px; text-align: center; font-size: 14px;">100%</span>
        <button title="Zoom In" onclick="zoomIn()" style="background: none; border: none; font-size: 18px; cursor: pointer;">➕</button>
    </div>
    <!-- Right: Print & Exit Buttons -->
    <div style="display: flex; align-items: center; gap: 8px;">
        <button onclick="printPage()" style="background: #4CAF50; color: #fff; font-weight: bold; font-size: 20px; border: none; border-radius: 20px; padding: 2px 24px; cursor: pointer;">Print</button>
        <button onclick="exitPage()" style="background: #b71c1c; color: #fff; font-weight: bold; font-size: 20px; border: none; border-radius: 20px; padding: 2px 24px; cursor: pointer;">EXIT</button>
    </div>
</div>
<script>
    let zoomLevel = 1.0;
    const minZoom = 0.5;
    const maxZoom = 2.0;
    const zoomStep = 0.1;
    let currentPage = 1;
    let totalPages = 0;
    function updateZoom() {
        document.getElementById('mainContent').style.zoom = zoomLevel;
        document.getElementById('zoomPercent').innerText = Math.round(zoomLevel * 100) + '%';
    }
    function zoomIn() {
        if (zoomLevel < maxZoom) {
            zoomLevel += zoomStep;
            zoomLevel = Math.min(maxZoom, zoomLevel);
            updateZoom();
        }
    }
    function zoomOut() {
        if (zoomLevel > minZoom) {
            zoomLevel -= zoomStep;
            zoomLevel = Math.max(minZoom, zoomLevel);
            updateZoom();
        }
    }
    function printPage() {
        // Show all pages before printing
        const pages = document.querySelectorAll('.record-page');
        const prevStates = Array.from(pages).map(el => el.style.display);
        pages.forEach(el => el.style.display = '');
        // Print, then restore previous state
        setTimeout(() => {
            window.print();
            setTimeout(() => {
                pages.forEach((el, idx) => {
                    el.style.display = (idx + 1 === currentPage) ? '' : 'none';
                });
            }, 100);
        }, 50);
    }
    function exitPage() {
        window.close();
    }
    function showPage(page) {
        const pages = document.querySelectorAll('.record-page');
        totalPages = pages.length;
        if (page < 1) page = 1;
        if (page > totalPages) page = totalPages;
        currentPage = page;
        pages.forEach((el, idx) => {
            el.style.display = (idx + 1 === currentPage) ? '' : 'none';
        });
        document.getElementById('pageInput').value = currentPage;
        document.getElementById('pageTotal').innerText = '/' + totalPages;
    }
    function nextPage() { showPage(currentPage + 1); }
    function prevPage() { showPage(currentPage - 1); }
    function firstPage() { showPage(1); }
    function lastPage() { showPage(totalPages); }
    window.onload = function() {
        updateZoom();
        showPage(1);
    };
</script>
<div id="mainContent">
{% for row in data %}
<div class="record-page" style="page-break-after: always; display: none;">
<!-- Header Notice -->
{% if row.tip %}
<div style="font-size: 12px; text-align: center; border: 1px solid #000; border-bottom: none; border-radius: 0; margin-bottom: -1px;">
    (टीप :- *सदर मालमत्ता आकारणी नक्कल केवळ ग्रामपंचायत कर आकारणी बाबत असून इतर कोणत्याही हक्काबाबत हा दस्त कायदेशीर पुरावा सांगत नाही. *नमूद मोजमापे तांत्रिक दृष्ट्या प्रमाणित तथा प्रमाणबद्ध केलेली नाहीत)
</div>
{% else %}
<div style="font-size: 12px; text-align: center; border: 1px solid #000; border-bottom: none; border-radius: 0; margin-bottom: -1px; height: 22px;">&nbsp;</div>
{% endif %}
<!-- Header Main Table -->
<table style="width: 100%; border-collapse: collapse; border: 1px solid #000; margin-top: 0;">
    <tr>
        <!-- Left Info Table -->
        <td style="width: 22%; border-right: 1px solid #000; border-left: none; border-top: none; border-bottom: none; vertical-align: top; padding: 0;">
            <table style="width: 100%; font-size: 14px; border-collapse: collapse; border: none;">
                <tr>
                    <td style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-left: none; border-top: none;">ग्रामपंचायत : </td>
                    <td style="border-bottom: 1px solid #000; border-right: none; border-left: none; border-top: none;"> {{row.gramPanchayat|default('')}} </td>
                </tr>
                <tr>
                    <td style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-left: none; border-top: none;">गाव/मोहल्ला : </td>
                    <td style="border-bottom: 1px solid #000; border-right: none; border-left: none; border-top: none;">{{row.village|default('')}}</td>
                </tr>
                <tr>
                    <td style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-left: none; border-top: none;">तालुका : </td>
                    <td style="border-bottom: 1px solid #000; border-right: none; border-left: none; border-top: none;"> {{row.taluka|default('')}} </td>
                </tr>
                <tr>
                    <td style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-left: none; border-top: none;">जिल्हा : </td>
                    <td style="border-bottom: 1px solid #000; border-right: none; border-left: none; border-top: none;"> {{row.jilha|default('')}} </td>
                </tr>
            </table>
        </td>   
        <!-- Center Title -->
        <td style="width: 56%; text-align: center; vertical-align: top; background: #e0e0e0; border-right: 1px solid #000; border-left: none; border-top: none; border-bottom: none;">
            <div style="font-size: 32px; font-weight: bold; letter-spacing: 2px;">नमुना ८</div>
            <div style="font-size: 14px;">नियम 32 (1)</div>
            <div style="font-size: 16px; margin-top: 8px;">
                सन {{row.yearFrom}}  ते {{row.yearTo}}  या वर्षासाठी कर आकारणी नोंदवही
            </div>
        </td>
        <!-- Right PHOTO/QR -->
        <td style="width: 22%; text-align: center; vertical-align: top; border-left: none; border-top: none; border-bottom: none; border-right: none; padding: 0;">
            <table style="width: 100%; border-collapse: collapse; border: none;">
                <tr>
                    <td style="width: 50%; border-right: 1px solid #000; border-bottom: none; border-top: none; border-left: none; text-align: center; vertical-align: top;">
                        <div style="font-size: 12px;">PHOTO</div>
                        <div style="border: 1px solid #000; width: 80px; height: 80px; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                            <img src= {{row.photoURL | default('')}} alt="Sample Photo" style="width:78px; height: 78px; object-fit: cover;" />
                        </div>
                    </td>
                    <td style="width: 50%; border-left: none; border-bottom: none; border-top: none; border-right: none; text-align: center; vertical-align: top;">
                        <div style="font-size: 12px;">QR-CODE</div>
                        <div style="border: 1px solid #000; width: 80px; height: 80px; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                            <img src= {{row.bank_qr_code | default('')}} alt="Sample QR Code" style="width: 78px; height: 78px; object-fit: cover;" />
                        </div>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<style>
    table th, table td {
        padding: 2px 4px !important;
        border: 1px solid #000 !important;
    }
</style>
<!-- Table Body: 14 columns, nested headers and rows -->
<table style="text-align: center; width: 100%; border-collapse: collapse; border: 1px solid #000; margin-top: 0; font-size: 14px;">
    <tr>
        <th rowspan="2" style="width: 2.5%;">अ.क्र.</th>
        <th rowspan="2" style="width: 8%;">रस्त्याचे नाव</th>
        <th rowspan="2" style="width: 5%;">सिटी सर्व्हे गट</th>
        <th rowspan="2" style="width: 6%;">मालमत्ता क्रमांक</th>
        <th rowspan="2" style="width: 13%;">मालकाचे नाव</th>
        <th rowspan="2" style="width: 7%;">भोगवटादाराचे नाव</th>
        <th rowspan="2" style="width: 10%;">मालमत्तेचे वर्णन</th>
        <th rowspan="2" style="width: 6%;">मिळकत बांधकामाचे वर्ष</th>
        <th rowspan="2" style="width: 10%;">एकूण क्षेत्रफळ चौ.फु.चौ.मी.</th>
        <th colspan="3" style="width: 18%;">रेडीरेकनर दर प्रती चौ.मी. (रुपये)</th>
        <th rowspan="2" style="width: 4%;">घसारा दर</th>
        <th rowspan="2" style="width: 4%;">इमारतीचा वापरानुसार भारांक</th>
    </tr>
    <tr>
        <th style="width: 6%;">जमीन (खुली जागा)</th>
        <th style="width: 6%;">इमारत</th>
        <th style="width: 6%;">बांधकाम</th>
    </tr>
    <!-- Number series row -->
    <tr style="text-align: center;font-weight: 700;">
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
        <td>7</td>
        <td>8</td>
        <td>9</td>
        <td>10</td>
        <td>11</td>
        <td>12</td>
        <td>13</td>
        <td>14</td>
    </tr>
    <tr>
        <td rowspan="2" >{{row.srNo|default('')}}</td>
        <td rowspan="2" style="text-align: left;">{{row.roadName|default('')}}</td>
        <td rowspan="2">{{row.cityWardGatNumber|default('')}}</td>
        <td rowspan="2">{{row.propertyNumber|default('')}}</td>
        <td rowspan="2" style="text-align: left;">
            {{row.ownerName|default('')}}
        </td>
        <td rowspan="2">{{row.occupantName|default('')}}</td>
        <td rowspan="2" style="text-align: left;"> {{row.constructionType[0].type if row.constructionType and row.constructionType|length > 0 else ''}} <br> {{row.constructionType[1].type if row.constructionType and row.constructionType|length > 1 else ''}} <br/> {{row.khaliJaga[0].constructiontype if row.khaliJaga and row.khaliJaga|length > 0 else ''}} </td>
        <td rowspan="2"> {{row.constructionType[0].year if row.constructionType and row.constructionType|length > 0 else ''}} <br>{{row.constructionType[1].year if row.constructionType and row.constructionType|length > 1 else ''}}<br/></td>
        <td rowspan="2">{{row.areaEast|default('')}} x {{row.areaNorth|default('')}}</td>
        <td rowspan="2">{{khaliJaga[0].rate if khaliJaga and khaliJaga|length > 0 else ''}}-{{khaliJaga[0].length if khaliJaga and khaliJaga|length > 0 else ''}}</td>
        <td rowspan="2"></td>
    </tr>
    <tr>
    <td> {{row.constructionType[0].rate if row.constructionType and row.constructionType|length > 0 else ''}}-{{row.constructionType[0].length if row.constructionType and row.constructionType|length > 0 else ''}}x{{row.constructionType[0].width if row.constructionType and row.constructionType|length > 0 else ''}} <br>{{row.constructionType[1].rate if row.constructionType and row.constructionType|length > 1 else ''}}-{{row.constructionType[1].length if row.constructionType and row.constructionType|length > 1 else ''}}x{{row.constructionType[1].width if row.constructionType and row.constructionType|length > 1 else ''}}<br/></td>
        <td>{{row.constructionType[0].depreciation_rate if row.constructionType and row.constructionType|length > 0 else ''}}<br>{{row.constructionType[1].depreciation_rate if row.constructionType and row.constructionType|length > 1 else ''}}<br/>0</td>
        <td>{{row.constructionType[0].usageBasedBuildingWeightageFactor if row.constructionType and row.constructionType|length > 0 else ''}}<br> {{row.constructionType[1].usageBasedBuildingWeightageFactor if row.constructionType and row.constructionType|length > 1 else ''}} <br/> {{row.khaliJaga[0].usageBasedBuildingWeightageFactor if row.khaliJaga and row.khaliJaga|length > 0 else ''}} </td>
    </tr>

    <tr>
        <td colspan="2" style="text-align: left; font-weight: bold;">आधार क्रमांक :</td>
        <td>{% if aadharCard %}{{aadharNumber|default('')}}{% endif %}</td>
        <td colspan="5" style="text-align: right; font-weight: bold;">एकूण चौरस फुट </td>
        <td> {{row.total_arearinfoot|default('')}} </td>
        <td> {{row.khaliJaga[0].totalkhalijagaareainfoot if row.khaliJaga and row.khaliJaga|length > 0 else ''}} </td>
        <td></td>
        <td>{{row.totalConstruction|default('')}}</td>   
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td colspan="2" style="text-align: left; font-weight: bold;">मोबाईल क्रमांक :</td>
        <td>{% if mobileNumberAdd %}{{mobileNumber|default('')}}{% endif %}</td>
        <td colspan="5" style="text-align: right; font-weight: bold;">एकूण चौरस मीटर</td>
        <td> {{row.totalareainmeters|default('')}} </td>
        <td> {{row.khaliJaga[0].totalkhalijagaareainmeters if row.khaliJaga and row.khaliJaga|length > 0 else ''}} </td>
        <td>0</td>
        <td>{{row.totalConstruction|default('')}}</td>
        <td></td>
        <td></td>
    </tr>
</table>

<table style="text-align: center; width: 100%; border-collapse: collapse; border: 1px solid #000; font-size: 14px; margin-top: 0;">
    <tr>
        <th rowspan="2">भांडवली मूल्य (रुपये)</th>
        <th rowspan="2">कराचे दर (पैसे)</th>
        <th colspan="7">कराची रक्कम (रुपये)</th>
        <th colspan="5">अपिलाचे निकाल आणि त्यानंतर केलेले फेरफार (रुपये)</th>
        <th rowspan="2" colspan="2">नंतर वाढ किंवा घट आलेल्या बांधकामाचे अंदाजित क्षेत्र</th>
    </tr>
    <tr>
        <th>घरपट्टी</th>
        <th>दिवाबत्ती</th>
        <th>आरोग्यकर</th>
        <th>पाणीपट्टी</th>
        <th>सफाई कर </th>
        <th>शौ.कर</th>
        <th>एकूण</th>
        <th>घरपट्टी</th>
        <th>दिवाबत्ती</th>
        <th>आरोग्यकर</th>
        <th>पाणीपट्टी</th>
        <th>एकूण</th>
    </tr>
    <tr style="text-align: center;font-weight: 700;">
        <td>15</td>
        <td>16</td>
        <td>17</td>
        <td>18</td>
        <td>19</td>
        <td>20</td>
        <td>21</td>
        <td>22</td>
        <td>23</td>
        <td>24</td>
        <td>25</td>
        <td>26</td>
        <td>27</td>
        <td>28</td>
        <td colspan="2">29</td>
    </tr>
    <tr>
        <td>{{row.khaliJaga[0].capitalValue if row.khaliJaga and row.khaliJaga|length > 0 else ''}}<br>{{row.constructionType[0].capitalValue if row.constructionType and row.constructionType|length > 0 else ''}}<br>{{row.constructionType[1].capitalValue if row.constructionType and row.constructionType|length > 1 else ''}}</td>
        <td>{{row.constructionType[0].taxRates if row.constructionType and row.constructionType|length > 0 else ''}}<br> {{row.constructionType[1].taxRates if row.constructionType and row.constructionType|length > 1 else ''}} <br> {{row.khaliJaga[0].taxRates if row.khaliJaga and row.khaliJaga|length > 0 else ''}} </td>
        <td> {{row.constructionType[0].houseTax if row.constructionType and row.constructionType|length > 0 else ''}} <br> {{row.constructionType[1].houseTax if row.constructionType and row.constructionType|length > 1 else ''}} <br> {{row.khaliJaga[0].houseTax if row.khaliJaga and row.khaliJaga|length > 0 else ''}} </td>
        <td> {{row.lightingTax|default('')}} </td>
        <td> {{row.healthTax|default('')}} </td>
        <td> {{row.waterTax|default('')}} </td>
        <td> {{row.cleaningTax|default('')}} </td>
        <td> {{row.toiletTax|default('')}} </td>
        <td> {{row.totaltax|default('')}} </td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td colspan="2"></td>
    </tr>
    <tr>
        <td > {{row.totalCapitalValue|default('')}} </td>
        <td></td>
        <td> {{row.totalHouseTax|default('')}} </td>
        <td> {{row.lightingTax|default('')}} </td>
        <td> {{row.healthTax|default('')}} </td>
        <td> {{row.waterTax|default('')}} </td>
        <td> {{row.cleaningTax|default('')}} </td>
        <td> {{row.toiletTax|default('')}} </td>
        <td> {{row.totaltax|default('')}} </td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table>

<!-- Footer/Signature/Logo area -->
<table style="text-align: center; width: 100%; border-collapse: collapse; border: 1px solid #000; font-size: 14px; margin-top: 0;">
    <tr>
        <td style="text-align: left; border-right: 1px solid #000;">शौचालय : {{row.toilet|default('')}} </td>
        <td style="text-align: left; border-right: 1px solid #000;">
            {% if row.boundaryMarking %}
            <td style="text-align: left; border-right: 1px solid #000;">चतुर्सिमा</td>
            {% else %}
            <td style="text-align: left; border-right: 1px solid #000; height:30px;"></td>
            {% endif %}
        </td>
        {% if row.boundaryMarking %}
        <td style="text-align: left; border-right: 1px solid #000;">पूर्व : {{row.boundaryEast|default('')}} </td>
        <td style="text-align: left; border-right: 1px solid #000;">पश्चिम : {{row.boundaryWest|default('')}} </td>
        <td style="text-align: left; border-right: 1px solid #000;">उत्तर : {{row.boundaryNorth|default('')}} </td>
        <td style="text-align: left; border-right: 1px solid #000;">दक्षिण : {{row.boundarySouth|default('')}} </td>
        {% else %}
        <td style="text-align: left; border-right: 1px solid #000; height:30px;"></td>
        <td style="text-align: left; border-right: 1px solid #000; height:30px;"></td>
        <td style="text-align: left; border-right: 1px solid #000; height:30px;"></td>
        <td style="text-align: left; border-right: 1px solid #000; height:30px;"></td>
        {% endif %}
    </tr>
    <tr>
        <td style="text-align: left; vertical-align: middle; border-right: 1px solid #000;">
            {% if row.date %}
            <td style="text-align: left; vertical-align: middle; border-right: 1px solid #000;">
                दिनांक : {{todayDate|default('')}} <br>
            </td>
            {% else %}
            <td style="text-align: left; vertical-align: middle; border-right: 1px solid #000; height:30px;"></td>
            {% endif %}
        </td>
        <td colspan="2" style="text-align: left; vertical-align: middle; border-right: 1px solid #000;">
            {% if row.stamp %}
            <td colspan="2" style="text-align: left; vertical-align: middle; border-right: 1px solid #000;">
                ग्रामपंचायत चा शिक्का
            </td>
            {% else %}
            <td colspan="2" style="text-align: left; vertical-align: middle; border-right: 1px solid #000; height:30px;"></td>
            {% endif %}
        </td>
        {% if row.sachivSarpanch %}
        <td  style="text-align: left; vertical-align: middle; border-right: 1px solid #000;">
            सचिव/सरपंच ग्रामपंचायत वाडी( बु.)
        </td>
        {% else %}
        <td  style="text-align: left; vertical-align: middle; border-right: 1px solid #000; height:30px ">
        </td>
        {% endif %}
    </tr>
</table> 
</div>
{% endfor %}
</div>
<script>
// Attach navigation button handlers
window.addEventListener('DOMContentLoaded', function() {
    document.querySelector('button[title="Next Page"]').onclick = nextPage;
    document.querySelector('button[title="Previous Page"]').onclick = prevPage;
    document.querySelector('button[title="First Page"]').onclick = firstPage;
    document.querySelector('button[title="Last Page"]').onclick = lastPage;
    document.getElementById('pageInput').addEventListener('change', function() {
        let val = parseInt(this.value);
        if (!isNaN(val)) showPage(val);
    });
});
</script>
<!-- Update the page number display in the toolbar -->
<script>
// Add a span with id="pageTotal" after the pageInput in the toolbar
if (!document.getElementById('pageTotal')) {
    var pageInput = document.getElementById('pageInput');
    var pageTotal = document.createElement('span');
    pageTotal.id = 'pageTotal';
    pageTotal.style.fontSize = '14px';
    pageTotal.style.color = '#888';
    pageInput.parentNode.insertBefore(pageTotal, pageInput.nextSibling);
}
</script>

