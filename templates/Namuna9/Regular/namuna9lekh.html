<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <title>नमुना ९ लेख</title>
    <style>
        body { font-family: 'Mangal', Arial, sans-serif; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #000; padding: 2px 6px; font-size: 15px; }
        .no-border { border: none !important; }
        .center { text-align: center; }
        .right { text-align: right; }
        .bold { font-weight: bold; }
        .header-table td { border: none; }
        .sub-header { font-size: 18px; font-weight: bold; }
        .watermark {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            color: #bbb;
            font-size: 48px;
            opacity: 0.2;
            z-index: 0;
            pointer-events: none;
        }
        .outer-border {
            border: 2px solid #000;
            padding: 8px;
            margin: 16px auto;
            width: 95%;
            background: #fff;
            position: relative;
        }
        @media print {
            @page {
                size: A4;
                margin: 0;
            }
            #toolbar {
                display: none !important;
            }
            .outer-border {
                page-break-after: always;
            }
            .outer-border:last-of-type {
                page-break-after: auto;
            }
        }
    </style>
</head>
<body>
    <div id="toolbar" style="display: flex; align-items: center; justify-content: space-between; padding: 6px 12px; background: #f8f8f8; border-bottom: 1px solid #ccc;">
        <!-- Left: Icon Buttons & Navigation -->
        <div style="display: flex; align-items: center; gap: 6px;">
            <button title="First Page" style="background: none; border: none; font-size: 16px; cursor: pointer;">⏮️</button>
            <button title="Previous Page" style="background: none; border: none; font-size: 16px; cursor: pointer;">◀️</button>
            <input type="text" value="1" id="pageInput" style="width: 32px; text-align: center; font-size: 14px; border: 1px solid #ccc; border-radius: 2px; margin: 0 2px;" oninput="goToPage(this.value)" />
            <span id="pageTotal" style="font-size: 14px; color: #888;"></span>
            <button title="Next Page" style="background: none; border: none; font-size: 16px; cursor: pointer;">▶️</button>
            <button title="Last Page" style="background: none; border: none; font-size: 16px; cursor: pointer;">⏭️</button>
            <button title="Zoom Out" onclick="zoomOut()" style="background: none; border: none; font-size: 18px; cursor: pointer;">➖</button>
            <span id="zoomPercent" style="min-width: 40px; text-align: center; font-size: 14px;">100%</span>
            <button title="Zoom In" onclick="zoomIn()" style="background: none; border: none; font-size: 18px; cursor: pointer;">➕</button>
        </div>
        <!-- Right: Print & Exit Buttons -->
        <div style="display: flex; align-items: center; gap: 8px;">
            <button onclick="printPage()" style="background: #4CAF50; color: #fff; font-weight: bold; font-size: 20px; border: none; border-radius: 20px; padding: 2px 24px; cursor: pointer;">Print</button>
            <button onclick="exitPage()" style="background: #b71c1c; color: #fff; font-weight: bold; font-size: 20px; border: none; border-radius: 20px; padding: 2px 24px; cursor: pointer;">EXIT</button>
        </div>
    </div>
    <script>
        let zoomLevel = 1.0;
        const minZoom = 0.5;
        const maxZoom = 2.0;
        const zoomStep = 0.1;
        let currentPage = 1;
        const recordsPerPage = 1;
        let totalPages = 0;
        let allRecords = [];

        function updateZoom() {
            document.querySelectorAll('.outer-border').forEach(el => el.style.zoom = zoomLevel);
            document.getElementById('zoomPercent').innerText = Math.round(zoomLevel * 100) + '%';
        }
        function zoomIn() {
            if (zoomLevel < maxZoom) {
                zoomLevel += zoomStep;
                updateZoom();
            }
        }
        function zoomOut() {
            if (zoomLevel > minZoom) {
                zoomLevel -= zoomStep;
                updateZoom();
            }
        }
        function showPage(page) {
            if (!allRecords.length) {
                allRecords = Array.from(document.querySelectorAll('.outer-border'));
            }
            totalPages = Math.ceil(allRecords.length / recordsPerPage);

            if (page < 1) page = 1;
            if (page > totalPages) page = totalPages;
            currentPage = page;

            allRecords.forEach((el, idx) => {
                const pageIdx = Math.floor(idx / recordsPerPage) + 1;
                el.style.display = (pageIdx === currentPage) ? '' : 'none';
            });

            document.getElementById('pageInput').value = currentPage;
            document.getElementById('pageTotal').innerText = '/ ' + totalPages;
        }

        function goToPage(pageNumber) {
            const page = parseInt(pageNumber, 10);
            if (!isNaN(page)) {
                showPage(page);
            }
        }
        function nextPage() { showPage(currentPage + 1); }
        function prevPage() { showPage(currentPage - 1); }
        function firstPage() { showPage(1); }
        function lastPage() { showPage(totalPages); }
        
        function printPage() {
            const originalDisplay = allRecords.map(el => el.style.display);
            allRecords.forEach(el => el.style.display = 'block');
            window.print();
            allRecords.forEach((el, idx) => el.style.display = originalDisplay[idx]);
        }

        function exitPage() {
            window.close();
        }

        window.onload = function() {
            showPage(1);
            updateZoom();
            document.querySelector('button[title="First Page"]').onclick = firstPage;
            document.querySelector('button[title="Previous Page"]').onclick = prevPage;
            document.querySelector('button[title="Next Page"]').onclick = nextPage;
            document.querySelector('button[title="Last Page"]').onclick = lastPage;
        };
    </script>
    {% for record in data %}
    <div class="outer-border">
        {% for copy in [1, 2] %}
        <div>
            <div class="bold main-title center">ग्रामपंचायत कार्यालय {{ record.gramPanchayat or '' }}</div>
            <div class="center subtitle">नमुना ९ लेख<br> मागणी लेख नमुना <br> नमुना ३ पहा</div>
            <table class="details-table" style="margin-top: 8px;">
                <tr>
                    <td style="width: 12%;">श्री / श्रीमती :</td>
                    <td class="bold">{{ record.ownerName or '' }}</td>
                </tr>
                <tr>
                    <td>भोगवटदार :</td>
                    <td class="bold">{{ record.occupantName or '' }}</td>
                </tr>
                <tr>
                    <td>राहणार :</td>
                    <td class="bold">{{ record.gramPanchayat or '' }}</td>
                </tr>
            </table>
            <div class="center bold notice-box">नोटीस देण्यात येते कि</div>
            <div class="marathi-text" style="min-height: 120px;">
                <div class="watermark">{{ record.gramPanchayat or '' }}</div>
                भागं कर, घर कर, दिवा, आरोग्य, पाणी कर भागंकर दिनांक / / रोजी सुरू होणारा आहे. // तरीही नमूद मागणी तुळशीमुळे अदा न केल्यास एकूण रक्कम रुपये {{ record.totalTax or '_____' }} च्या रक्कमेची वसुली करण्यात येईल आणि वसुलीची कारवाई करण्यात येईल. आपण ही रक्कम मिळाल्यानंतर १५ (पंधरा) दिवसांच्या आत जमा करावी. अन्यथा वसुलीची कारवाई करण्यात येईल. ही नोटीस मिळाल्यानंतर आपण वरील रक्कम ग्रामपंचायत कार्यालयात जमा करावी. अन्यथा वसुलीची कारवाई करण्यात येईल. 
            </div>
            <div class="signature">
                सचिव / सरपंच<br>
                ग्रामपंचायत {{ record.gramPanchayat or '' }}
            </div>
        </div>
        {% if copy == 1 %}
        <div  style="border-bottom: 1px dashed #000; margin: 8px 0 8px 0;"></div>
        {% endif %}
        {% endfor %}
    </div>
    {% endfor %}
</body>
</html>
